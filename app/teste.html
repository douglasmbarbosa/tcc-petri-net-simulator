<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desenhar e Mover Círculos</title>
    <style>
        canvas {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <button id="drawCircleButton">Desenhar Círculo</button>
    <canvas id="myCanvas" width="500" height="500"></canvas>

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            const canvas = document.getElementById('myCanvas');
            const ctx = canvas.getContext('2d');
            const button = document.getElementById('drawCircleButton');
            let drawCircle = false;
            let circles = [];
            let draggingCircle = null;
            let offsetX, offsetY;

            button.addEventListener('click', () => {
                drawCircle = true;
            });

            canvas.addEventListener('click', (event) => {
                if (drawCircle) {
                    const rect = canvas.getBoundingClientRect();
                    const x = event.clientX - rect.left;
                    const y = event.clientY - rect.top;

                    circles.push({x: x, y: y, radius: 20});
                    drawAllCircles();

                    drawCircle = false; // Reset to prevent drawing multiple circles
                }
            });

            canvas.addEventListener('mousedown', (event) => {
                const rect = canvas.getBoundingClientRect();
                const mouseX = event.clientX - rect.left;
                const mouseY = event.clientY - rect.top;

                for (let circle of circles) {
                    if (isInsideCircle(mouseX, mouseY, circle)) {
                        draggingCircle = circle;
                        offsetX = mouseX - circle.x;
                        offsetY = mouseY - circle.y;
                        break;
                    }
                }
            });

            canvas.addEventListener('mousemove', (event) => {
                if (draggingCircle) {
                    const rect = canvas.getBoundingClientRect();
                    const mouseX = event.clientX - rect.left;
                    const mouseY = event.clientY - rect.top;

                    draggingCircle.x = mouseX - offsetX;
                    draggingCircle.y = mouseY - offsetY;
                    drawAllCircles();
                }
            });

            canvas.addEventListener('mouseup', () => {
                draggingCircle = null;
            });

            function drawAllCircles() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                for (let circle of circles) {
                    ctx.beginPath();
                    ctx.arc(circle.x, circle.y, circle.radius, 0, Math.PI * 2);
                    ctx.fillStyle = 'blue';
                    ctx.fill();
                    ctx.stroke();
                }
            }

            function isInsideCircle(x, y, circle) {
                const dx = x - circle.x;
                const dy = y - circle.y;
                return dx * dx + dy * dy <= circle.radius * circle.radius;
            }
        });
    </script>
</body>
</html>
